
@{
    ViewBag.Title = "Index";
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Admin</title>
    <link rel="stylesheet" href="~/Content/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/Content/wwwroot/css/site.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />

</head>
<body>
    <header>
        <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-dark bg-white border-bottom box-shadow mb-3" style="background: #130347 !important">
            <div class="container">
                <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index" style="color:white"><i class="far fa-snowflake"></i> Sabi | Admin Panel <i class="far fa-snowflake"></i></a>
            </div>
        </nav>
    </header>
    <div class="MainDivAdmin">

        <div style="padding:10px;">
            <h2>Users</h2>
            <div>
                <div class="w-margin-bottom-10 w-height-35">
                    <input type="button" class="btn btn-primary w-pull-right w-margin-left-10" value="Add User" id="addUsersBtn" data-target="#userBootstrapModal" data-toggle="modal" />
                    <input type="button" class="btn btn-primary w-pull-right w-margin-left-10" value="Add Category" id="addCategoryBtn" data-target="#categoryBootstrapModal" data-toggle="modal" style="display:none;" />
                    <input type="button" class="btn btn-primary w-pull-right w-margin-left-10" value="Add Sub Category" id="addSubCategoryBtn" data-target="#subCategoryBootstrapModal" data-toggle="modal" style="display:none;" />
                    <input type="button" class="btn btn-primary w-pull-right w-margin-left-10" value="Add Items" id="addItemBtn" data-target="#itemBootstrapModal" data-toggle="modal" style="display:none;" />
                    <input type="text" class="form-control w-pull-right w-width-200 w-margin-left-10" placeholder="Search" id="searchName" onkeyup="SearchUsersByName();" />
                    <input type="text" class="form-control w-pull-right w-width-200 w-margin-left-10" placeholder="Search" id="searchSubCategoryName" onkeyup="SearchSubCategoryByName();" style="display:none;" />
                    <input type="text" class="form-control w-pull-right w-width-200 w-margin-left-10" placeholder="Search" id="searchItemName" onkeyup="SearchItemsByName();" style="display:none;" />
                    <select class="form-control w-width-200 w-pull-right w-margin-left-10" id="filterUserByType" onchange="FilterByRoleType();">
                        <option value="All">All</option>
                        <option value="Admin">Admin</option>
                        <option value="User">User</option>
                        <option value="Vendor">Vendor</option>
                    </select>
                    <select class="form-control w-width-200 w-pull-right" id="filterByType" onchange="GetData();">
                        <option value="Users">Users</option>
                        <option value="Category">Category</option>
                        <option value="SubCategory">Sub Category</option>
                        <option value="Items">Items</option>
                    </select>
                </div>
                <div id="usersData">
                    <table class="table table-hover">
                        <thead class="w-thead-bg">
                            <tr>
                                <th>Id</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Contact</th>
                                <th>Username</th>
                                <th>Type</th>
                                <th>Status</th>
                                <th>Shop Name</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="filterUser">
                            @{
                                if (ViewBag.Users.Count > 0)
                                {
                                    foreach (var user in ViewBag.Users)
                                    {
                                        <tr>
                                            <td>@user.UserId</td>
                                            <td>@user.name</td>
                                            <td>@user.EmailAddress</td>
                                            <td>@user.Contact</td>
                                            <td>@user.username</td>
                                            <td id="FilterRoleType">@user.RoleType</td>
                                            <td>
                                                @if (user.isDeleted == "true")
                                                {
                                                    <i class="fa fa-times" aria-hidden="true"></i>
                                                }
                                                else
                                                {
                                                    <i class="fa fa-check" aria-hidden="true"></i>
                                                }
                                            </td>
                                            <td>
                                                @if (user.ShopName == "NA")
                                                {
                                                    @user.ShopName
                                                }
                                                else
                                                {
                                                    <a class="ShopName" onclick="GetCategoryData(@user.UserId);">@user.ShopName</a>
                                                }
                                            </td>
                                            <td>
                                                <input type="button" id="editUser" value="Edit" onclick="UpdateUser(@user.UserId, '@user.name', '@user.EmailAddress', '@user.Contact', '@user.username', '@user.RoleID', '@user.Address');" />
                                                <input type="button" id="deleteUser" value="Delete" onclick="DeleteUser(@user.UserId);" />
                                            </td>
                                        </tr>
                                    }
                                }
                                else
                                {
                                    <tr>
                                        <td colspan="7">
                                            <div class="w-empty-list">Record Not Found</div>
                                        </td>
                                    </tr>
                                }
                            }
                        </tbody>
                    </table>
                </div>

                <div id="categoryData" style="display:none;">
                    <table class="table table-hover">
                        <thead class="w-thead-bg">
                            <tr>
                                <th>Id</th>
                                <th>Name</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="filterCategory">
                            @{
                                if (ViewBag.Categories.Count > 0)
                                {
                                    foreach (var category in ViewBag.Categories)
                                    {
                                        <tr>
                                            <td>@category.CategoryId</td>
                                            <td>@category.CategoryName</td>
                                            <td>@category.CreatedDate</td>
                                            <td>
                                                <input type="button" id="viewSubCategory" value="View Sub Category" onclick="ViewSubCategory(@category.CategoryId);" />
                                                <input type="button" id="editCategory" value="Edit" onclick="GetUpdateCategory(@category.CategoryId, '@category.CategoryName');" />
                                                <input type="button" id="deleteCategory" value="Delete" onclick="DeleteCategory(@category.CategoryId);" />
                                            </td>
                                        </tr>
                                    }
                                }
                                else
                                {
                                    <tr>
                                        <td colspan="4">
                                            <div class="w-empty-list">Record Not Found</div>
                                        </td>
                                    </tr>
                                }
                            }
                        </tbody>
                    </table>
                </div>

                <div id="subCategoryData" style="display:none;">
                    <table class="table table-hover">
                        <thead class="w-thead-bg">
                            <tr>
                                <th>Id</th>
                                <th>Name</th>
                                <th>Image</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="filterSubCategory">
                            @{
                                if (ViewBag.SubCategories.Count > 0)
                                {
                                    foreach (var subCategory in ViewBag.SubCategories)
                                    {
                                        <tr>
                                            <td>@subCategory.SubCategorieId</td>
                                            <td>@subCategory.name</td>
                                            <td>@subCategory.image</td>
                                            <td>@subCategory.CreatedDate</td>
                                            <td>
                                                <input type="button" id="viewItems" value="View Items" onclick="ViewItems(@subCategory.SubCategorieId);" />
                                                <input type="button" id="editSubCategory" value="Edit" onclick="GetUpdateSubCategory(@subCategory.SubCategorieId, @subCategory.CategoryId, '@subCategory.name');" />
                                                <input type="button" id="deleteSubCategory" value="Delete" onclick="DeleteSubCategory(@subCategory.SubCategorieId);" />
                                            </td>
                                        </tr>
                                    }
                                }
                                else
                                {
                                    <tr>
                                        <td colspan="5">
                                            <div class="w-empty-list">Record Not Found</div>
                                        </td>
                                    </tr>
                                }
                            }
                        </tbody>
                    </table>
                </div>

                <div id="ItemsData" style="display:none;">
                    <table class="table table-hover">
                        <thead class="w-thead-bg">
                            <tr>
                                <th>Id</th>
                                <th>Image</th>
                                <th>Name</th>
                                <th>Price</th>
                                <th>Weight</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="filterItems">
                            @{
                                if (ViewBag.Items.Count > 0)
                                {
                                    foreach (var item in ViewBag.Items)
                                    {
                                        <tr>
                                            <td>@item.SubCategorieId</td>
                                            <td>@item.image</td>
                                            <td>@item.name</td>
                                            <td>@item.Price</td>
                                            <td>@item.Weight</td>
                                            <td>@item.CreatedDate</td>
                                            <td>
                                                <input type="button" id="editItem" value="Edit" onclick="UpdateItem(@item.SubCategorieId, '@item.name', '@item.image', '@item.Price', '@item.Weight');" />
                                                <input type="button" id="deleteItem" value="Delete" onclick="DeleteItem(@item.SubCategorieId);" />
                                            </td>
                                        </tr>
                                    }
                                }
                                else
                                {
                                    <tr>
                                        <td colspan="7">
                                            <div class="w-empty-list">Record Not Found</div>
                                        </td>
                                    </tr>
                                }
                            }
                        </tbody>
                    </table>
                </div>

            </div>
        </div>

        <div id="addUser">
            @{
                using (Html.BeginForm("AddUser", "User", FormMethod.Post, new { id = "addUserForm" }))
                {

                    @*user strat*@
                    <div class="modal fade " id="userBootstrapModal">
                        <div class="modal-dialog w-user-modal-dialog">
                            <div class="modal-content">
                                <!--Header-->
                                <div class="modal-header light-blue darken-3 white-text" style="background:#0273B6;">
                                    <h4 class="title" style="color:white;">Add User</h4>

                                    <button style="color:white;" type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <i class="fas fa-times" style="color:white;"></i>
                                    </button>
                                </div>
                                <div style="width:100%; overflow:auto" class="ModelTrack">
                                    <div class="modal-body" style="width:100%">
                                        <div id="UserDiv">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <label>First Name :</label>
                                                    <input type="text" class="form-control" id="FirstName" name="FirstName" required />
                                                </div>
                                                <div class="col-md-6">
                                                    <label>Last Name :</label>
                                                    <input type="text" class="form-control" id="LastName" name="LastName" required />
                                                </div>
                                                <div class="col-md-6">
                                                    <label>Email Address :</label>
                                                    <input type="email" class="form-control" id="EmailAddress" name="EmailAddress" required />
                                                </div>
                                                <div class="col-md-6">
                                                    <label>Contact :</label>
                                                    <input type="text" class="form-control" id="Contact" name="Contact" />
                                                </div>
                                                <div class="col-md-6">
                                                    <label>Username :</label>
                                                    <input type="text" class="form-control" id="Username" name="Username" required />
                                                </div>
                                                <div class="col-md-6">
                                                    <label>Password :</label>
                                                    <input type="password" class="form-control" id="Password" name="Password" required />
                                                </div>
                                                <div class="col-md-6">
                                                    <label>Type :</label>
                                                    <select class="form-control" id="RoleType" name="RoleType" required>
                                                        <option value="">Select</option>
                                                        <option value="1">Admin</option>
                                                        <option value="2">User</option>
                                                        <option value="3">Vendor</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-6">
                                                    <label>Address :</label>
                                                    <input type="text" class="form-control" id="Address" name="Address" />
                                                </div>
                                            </div>

                                            <input type="button" class="btn btn-info" value="Add" onclick="SaveUserData();" style="float:right;margin:10px 0;" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    @*user end*@


                }
            }
        </div>

        <input type="hidden" id="openUserModal" data-target="#updateUserBootstrapModal" data-toggle="modal" />

        <div id="editUser">
            @{
                using (Html.BeginForm("UpdateUser", "User", FormMethod.Post, new { id = "updateUserForm" }))
                {
                    @*user strat*@
                    <div class="modal fade " id="updateUserBootstrapModal">
                        <div class="modal-dialog w-user-modal-dialog">
                            <div class="modal-content">
                                <!--Header-->
                                <div class="modal-header light-blue darken-3 white-text" style="background:#0273B6;">
                                    <h4 class="title" style="color:white;">Update User</h4>

                                    <button style="color:white;" type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <i class="fas fa-times" style="color:white;"></i>
                                    </button>
                                </div>
                                <div style="width:100%; overflow:auto" class="ModelTrack">
                                    <div class="modal-body" style="width:100%">
                                        <div id="UserDiv">
                                            <input type="hidden" id="UpdateUserId" name="UpdateUserId" />
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <label>Name :</label>
                                                    <input type="text" class="form-control" id="UpdateUserName" name="UpdateUserName" required />
                                                </div>
                                                <div class="col-md-6">
                                                    <label>Email Address :</label>
                                                    <input type="email" class="form-control" id="UpdateUserEmailAddress" name="UpdateUserEmailAddress" required />
                                                </div>
                                                <div class="col-md-6">
                                                    <label>Contact :</label>
                                                    <input type="text" class="form-control" id="UpdateUserContact" name="UpdateUserContact" />
                                                </div>
                                                <div class="col-md-6">
                                                    <label>Username :</label>
                                                    <input type="text" class="form-control" id="UpdateUserUsername" name="UpdateUserUsername" required />
                                                </div>
                                                <div class="col-md-6">
                                                    <label>Type :</label>
                                                    <select class="form-control" id="UpdateRoleType" name="UpdateRoleType" required>
                                                        <option value="">Select</option>
                                                        <option value="1">Admin</option>
                                                        <option value="2">User</option>
                                                        <option value="3">Vendor</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-6">
                                                    <label>Address :</label>
                                                    <input type="text" class="form-control" id="UpdateUserAddress" name="UpdateUserAddress" />
                                                </div>
                                            </div>

                                            <input type="button" class="btn btn-info" value="Update" onclick="UpdateUserData();" style="float:right;margin:10px 0;" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    @*user end*@


                }
            }
        </div>

        @* add/update category start*@
        <div id="addCategory">
            @{
                using (Html.BeginForm("AddCategory", "Categories", FormMethod.Post, new { id = "addCategoryForm" }))
                {

                    @*category strat*@
                    <div class="modal fade " id="categoryBootstrapModal">
                        <div class="modal-dialog w-category-modal-dialog">
                            <div class="modal-content">
                                <!--Header-->
                                <div class="modal-header light-blue darken-3 white-text" style="background:#0273B6;">
                                    <h4 class="title" style="color:white;">Add Category</h4>

                                    <button style="color:white;" type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <i class="fas fa-times" style="color:white;"></i>
                                    </button>
                                </div>
                                <div style="width:100%; overflow:auto" class="ModelTrack">
                                    <div class="modal-body" style="width:100%">
                                        <div id="CategoryDiv">
                                            <div class="row">

                                                <div class="col-md-12">
                                                    <label>Category Name :</label>
                                                    <input type="text" class="form-control" id="CategoryName" name="CategoryName" required />
                                                </div>
                                            </div>

                                            <input type="button" class="btn btn-info" value="Add" onclick="SaveCategoryData();" style="float:right;margin:10px 0;" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    @*category end*@


                }
            }
        </div>

        <input type="hidden" id="openCategoryModal" data-target="#updateCategoryBootstrapModal" data-toggle="modal" />

        <div id="editCategory">
            @{
                using (Html.BeginForm("UpdateCategory", "Categories", FormMethod.Post, new { id = "updateCategoryForm" }))
                {
                    @*category strat*@
                    <div class="modal fade " id="updateCategoryBootstrapModal">
                        <div class="modal-dialog w-category-modal-dialog">
                            <div class="modal-content">
                                <!--Header-->
                                <div class="modal-header light-blue darken-3 white-text" style="background:#0273B6;">
                                    <h4 class="title" style="color:white;">Update Category</h4>

                                    <button style="color:white;" type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <i class="fas fa-times" style="color:white;"></i>
                                    </button>
                                </div>
                                <div style="width:100%; overflow:auto" class="ModelTrack">
                                    <div class="modal-body" style="width:100%">
                                        <div id="UserDiv">
                                            <input type="hidden" id="UpdateCategoryId" name="UpdateCategoryId" />
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <label>Category Name :</label>
                                                    <input type="text" class="form-control" id="UpdateCategoryName" name="UpdateCategoryName" />
                                                </div>
                                            </div>

                                            <input type="button" class="btn btn-info" value="Update" onclick="UpdateCategoryData();" style="float:right;margin:10px 0;" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    @*category end*@


                }
            }
        </div>
        @* add/update category end*@

        @* add/update subcategory start*@
        <div id="addSubCategory">
            @{
                using (Html.BeginForm("AddSubCategory", "SubCategory", FormMethod.Post, new { id = "addSubCategoryForm" }))
                {

                    @*category strat*@
                    <div class="modal fade " id="subCategoryBootstrapModal">
                        <div class="modal-dialog w-subCategory-modal-dialog">
                            <div class="modal-content">
                                <!--Header-->
                                <div class="modal-header light-blue darken-3 white-text" style="background:#0273B6;">
                                    <h4 class="title" style="color:white;">Add Sub Category</h4>

                                    <button style="color:white;" type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <i class="fas fa-times" style="color:white;"></i>
                                    </button>
                                </div>
                                <div style="width:100%; overflow:auto" class="ModelTrack">
                                    <div class="modal-body" style="width:100%">
                                        <div id="SubCategoryDiv">
                                            <div class="row">

                                                <div class="col-md-12">
                                                    <label>Sub Category Name :</label>
                                                    <input type="text" class="form-control" id="SubCategoryName" name="SubCategoryName" required />
                                                </div>
                                                <div class="col-md-12">
                                                    <label>Category :</label>
                                                    <select class="form-control" id="CategoryDrp" name="CategoryDrp" required>
                                                        @foreach (var item in ViewBag.Categories)
                                                        {
                                                            <option value="@item.CategoryId">@item.CategoryName</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>

                                            <input type="button" class="btn btn-info" value="Add" onclick="SaveSubCategoryData();" style="float:right;margin:10px 0;" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    @*category end*@


                }
            }
        </div>

        <input type="hidden" id="openSubCategoryModal" data-target="#updateSubCategoryBootstrapModal" data-toggle="modal" />

        <div id="editSubCategory">
            @{
                using (Html.BeginForm("UpdateSubCategory", "SubCategory", FormMethod.Post, new { id = "updateSubCategoryForm" }))
                {
                    @*category strat*@
                    <div class="modal fade " id="updateCategoryBootstrapModal">
                        <div class="modal-dialog w-subCategory-modal-dialog">
                            <div class="modal-content">
                                <!--Header-->
                                <div class="modal-header light-blue darken-3 white-text" style="background:#0273B6;">
                                    <h4 class="title" style="color:white;">Update Sub Category</h4>

                                    <button style="color:white;" type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <i class="fas fa-times" style="color:white;"></i>
                                    </button>
                                </div>
                                <div style="width:100%; overflow:auto" class="ModelTrack">
                                    <div class="modal-body" style="width:100%">
                                        <div id="UserDiv">
                                            <input type="hidden" id="UpdateSubCategoryId" name="UpdateSubCategoryId" />
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <label>Sub Category Name :</label>
                                                    <input type="text" class="form-control" id="UpdateSubCategoryName" name="UpdateSubCategoryName" required />
                                                </div>
                                                <div class="col-md-12">
                                                    <label>Category :</label>
                                                    <select class="form-control" id="UpdateCategoryDrp" name="UpdateCategoryDrp" required>
                                                        @foreach (var item in ViewBag.Categories)
                                                        {
                                                            <option value="@item.CategoryId">@item.CategoryName</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>

                                            <input type="button" class="btn btn-info" value="Update" onclick="UpdateSubCategoryData();" style="float:right;margin:10px 0;" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    @*category end*@


                }
            }
        </div>
        @* add/update subcategory end*@

        <style>
            .w-width-200 {
                width: 200px;
            }

            .w-height-35 {
                height: 35px;
            }

            .w-pull-right {
                float: right;
            }

            .w-pull-left {
                float: left;
            }

            .w-thead-bg {
                background-color: rgb(25, 126, 89);
                color: #ffffff;
            }

            .w-empty-list {
                text-align: center;
                color: red;
                width: 100%;
            }

            .w-margin-bottom-10 {
                margin-bottom: 10px;
            }

            .w-margin-left-10 {
                margin-left: 10px;
            }
        </style>

        <script>

            function UpdateUser(userId, name, email, contact, username, roleType, address) {
                debugger;
                $("#UpdateUserId").val(userId);
                $("#UpdateUserName").val(name);
                $("#UpdateUserEmailAddress").val(email);
                $("#UpdateUserContact").val(contact);
                $("#UpdateUserUsername").val(username);
                $("#UpdateRoleType").val(roleType);
                $("#UpdateUserAddress").val(address);
                $("#openUserModal").trigger("click");
            }

            function DeleteUser(userId) {
                location.href = '../User/DeleteUser?userId=' + userId;
            }

            function SaveUserData() {
                debugger;
                //User/Index
                if (document.getElementById('FirstName').value == "") {
                    alert("Please enter First Name.");
                    return;
                }
                if (document.getElementById('LastName').value == "") {
                    alert("Please enter Last Name.");
                    return;
                }
                if (document.getElementById('EmailAddress').value == "") {
                    alert("Please enter Email Address.");
                    return;
                }
                if (document.getElementById('Username').value == "") {
                    alert("Please enter Username.");
                    return;
                }
                if (document.getElementById('Password').value == "") {
                    alert("Please enter Password.");
                    return;
                }
                if (document.getElementById('RoleType').value == "") {
                    alert("Select one Type.");
                    return;
                }

                $.ajax({
                    type: "POST",
                    async: "true",
                    data: $("#addUserForm").serialize(),
                    url: "/User/AddUser",
                    contenttype: 'application/html; charset=utf-8',
                    datatype: 'html',
                    success: function (data) {
                        debugger;
                        if (data == "success") {
                            alert("User added successfully.");
                            window.location.reload();
                        }
                        else {
                            alert("User already exist.");
                            return;
                        }
                    },
                    error: function () {
                        debugger;
                        alert("Error");
                    }
                });
            }

            function UpdateUserData() {
                debugger;
                //User/Index
                if (document.getElementById('UpdateUserName').value == "") {
                    alert("Please enter Name.");
                    return;
                }
                if (document.getElementById('UpdateUserEmailAddress').value == "") {
                    alert("Please enter Email Address.");
                    return;
                }
                if (document.getElementById('UpdateUserUsername').value == "") {
                    alert("Please enter Username.");
                    return;
                }
                if (document.getElementById('UpdateRoleType').value == "") {
                    alert("Select one Type.");
                    return;
                }

                $.ajax({
                    type: "POST",
                    async: "true",
                    data: $("#updateUserForm").serialize(),
                    url: "/User/UpdateUser",
                    contenttype: 'application/html; charset=utf-8',
                    datatype: 'html',
                    success: function (data) {
                        debugger;
                        if (data == "success") {
                            alert("User updated successfully.");
                            window.location.reload();
                        }
                        else {
                            alert("Record not updated.");
                            return;
                        }
                    },
                    error: function () {
                        debugger;
                        alert("Error");
                    }
                });
            }

            function SearchUsersByName() {
                debugger;
                var name = document.getElementById("searchName").value;
                name = name.toLowerCase();
                $("#filterUser tr").filter(function () {
                    $(this).toggle($(this).text().toLowerCase().indexOf(name) > -1)
                });
            }

            function SearchSubCategoryByName() {
                debugger;
                var name = document.getElementById("searchSubCategoryName").value;
                name = name.toLowerCase();
                $("#filterSubCategory tr").filter(function () {
                    $(this).toggle($(this).text().toLowerCase().indexOf(name) > -1)
                });
            }

            function SearchItemsByName() {
                debugger;
                var name = document.getElementById("searchItemName").value;
                name = name.toLowerCase();
                $("#filterItems tr").filter(function () {
                    $(this).toggle($(this).text().toLowerCase().indexOf(name) > -1)
                });
            }

            function FilterByRoleType() {
                debugger;
                var type = document.getElementById("filterUserByType").value;
                $.ajax({
                    type: "GET",
                    url: '/User/GetUsersByType?type=' + type,
                    success: function (response) {
                        debugger;
                        $("#filterUser").html(response);
                    }
                });
            }

            function GetData() {
                debugger;
                //User/Index
                var name = document.getElementById("filterByType").value;
                if (name == "Users") {
                    $("#usersData").show();
                    $("#categoryData").hide();
                    $("#subCategoryData").hide();
                    $("#ItemsData").hide();
                    $("#filterUserByType").show();
                    $("#searchName").show();
                    $("#searchSubCategoryName").hide();
                    $("#searchItemName").hide();
                    $("#addUsersBtn").show();
                    $("#addCategoryBtn").hide();
                    $("#addSubCategoryBtn").hide();
                    $("#addItemBtn").hide();

                }
                else if (name == "Category") {
                    $("#usersData").hide();
                    $("#categoryData").show();
                    $("#subCategoryData").hide();
                    $("#ItemsData").hide();
                    $("#filterUserByType").hide();
                    $("#searchName").hide();
                    $("#searchSubCategoryName").hide();
                    $("#searchItemName").hide();
                    $("#addUsersBtn").hide();
                    $("#addCategoryBtn").show();
                    $("#addSubCategoryBtn").hide();
                    $("#addItemBtn").hide();
                }
                else if (name == "SubCategory") {
                    $("#usersData").hide();
                    $("#categoryData").hide();
                    $("#subCategoryData").show();
                    $("#ItemsData").hide();
                    $("#filterUserByType").hide();
                    $("#searchName").hide();
                    $("#searchSubCategoryName").show();
                    $("#searchItemName").hide();
                    $("#addUsersBtn").hide();
                    $("#addCategoryBtn").hide();
                    $("#addSubCategoryBtn").show();
                    $("#addItemBtn").hide();
                }
                else {
                    $("#usersData").hide();
                    $("#categoryData").hide();
                    $("#subCategoryData").hide();
                    $("#ItemsData").show();
                    $("#filterUserByType").hide();
                    $("#searchName").hide();
                    $("#searchSubCategoryName").hide();
                    $("#searchItemName").show();
                    $("#addUsersBtn").hide();
                    $("#addCategoryBtn").hide();
                    $("#addSubCategoryBtn").hide();
                    $("#addItemBtn").show();
                }
            }

        </script>

        <script>
            //Category
            function GetUpdateCategory(categoryId, name) {
                debugger;
                $("#UpdateCategoryId").val(categoryId);
                $("#UpdateCategoryName").val(name);
                $("#openCategoryModal").trigger("click");
            }

            function DeleteCategory(categoryId) {
                location.href = '../Categories/DeleteCategory?categoryId=' + categoryId;
            }

            function GetAllCategories() {
                debugger;
                $.ajax({
                    type: "GET",
                    url: '/Categories/GetAllCategories',
                    success: function (response) {
                        debugger;
                        $("#filterCategory").html(response);
                    }
                });
            }

            function SaveCategoryData() {
                debugger;
                //User/Index
                if (document.getElementById('CategoryName').value == "") {
                    alert("Plaese enter Category Name");
                    return;
                }

                $.ajax({
                    type: "POST",
                    async: "true",
                    data: $("#addCategoryForm").serialize(),
                    url: "/Categories/AddCategory",
                    contenttype: 'application/html; charset=utf-8',
                    datatype: 'html',
                    success: function (data) {
                        debugger;
                        if (data == "success") {
                            alert("Category added successfully.");
                            GetAllCategories();
                        }
                        else {
                            alert("Category already exist.");
                            return;
                        }
                    },
                    error: function () {
                        debugger;
                        alert("Error");
                    }
                });
            }

            function UpdateCategoryData() {
                debugger;
                //User/Index
                if (document.getElementById('CategoryName').value == "") {
                    alert("Plaese enter Category Name");
                    return;
                }

                $.ajax({
                    type: "POST",
                    async: "true",
                    data: $("#updateCategoryForm").serialize(),
                    url: "/Categories/UpdateCategory",
                    contenttype: 'application/html; charset=utf-8',
                    datatype: 'html',
                    success: function (data) {
                        debugger;
                        if (data == "success") {
                            alert("Category updated successfully.");
                            GetAllCategories();
                        }
                        else {
                            alert("Record not updated.");
                            return;
                        }
                    },
                    error: function () {
                        debugger;
                        alert("Error");
                    }
                });
            }
        </script>

        <script>
            //Sub Category
            function GetUpdateSubCategory(subCategoryId, categoryId, name) {
                debugger;
                $("#UpdateSubCategoryId").val(subCategoryId);
                $("#UpdateCategoryDrp").val(categoryId);
                $("#UpdateSubCategoryName").val(name);
                $("#openUpdateCategoryModal").trigger("click");
            }

            function DeleteSubCategory(subCategoryId) {
                location.href = '../SubCategory/DeleteSubCategory?subCategoryId=' + subCategoryId;
            }

            function GetAllSubCategories() {
                debugger;
                $.ajax({
                    type: "GET",
                    url: '/SubCategory/GetAllSubCategories',
                    success: function (response) {
                        debugger;
                        $("#filterSubCategory").html(response);
                    }
                });
            }

            function SaveSubCategoryData() {
                debugger;
                //User/Index

                if (document.getElementById('SubCategoryName').value == "") {
                    alert("Please enter Sub Category Name.");
                    return;
                }
                if (document.getElementById('UpdateCategoryDrp').value == "") {
                    alert("Select one Category.");
                    return;
                }

                $.ajax({
                    type: "POST",
                    async: "true",
                    data: $("#addSubCategoryForm").serialize(),
                    url: "/SubCategory/AddSubCategory",
                    contenttype: 'application/html; charset=utf-8',
                    datatype: 'html',
                    success: function (data) {
                        debugger;
                        if (data == "success") {
                            alert("Sub Category added successfully.");
                            GetAllSubCategories();
                        }
                        else {
                            alert("Sub Category already exist.");
                            return;
                        }
                    },
                    error: function () {
                        debugger;
                        alert("Error");
                    }
                });
            }

            function UpdateSubCategoryData() {
                debugger;
                //User/Index
                if (document.getElementById('SubCategoryName').value == "") {
                    alert("Please enter Sub Category Name.");
                    return;
                }
                if (document.getElementById('CategoryDrp').value == "") {
                    alert("Select one Category.");
                    return;
                }

                $.ajax({
                    type: "POST",
                    async: "true",
                    data: $("#updateSubCategoryForm").serialize(),
                    url: "/SubCategory/UpdateSubCategory",
                    contenttype: 'application/html; charset=utf-8',
                    datatype: 'html',
                    success: function (data) {
                        debugger;
                        if (data == "success") {
                            alert("Sub Category updated successfully.");
                            GetAllSubCategories();
                        }
                        else {
                            alert("Record not updated.");
                            return;
                        }
                    },
                    error: function () {
                        debugger;
                        alert("Error");
                    }
                });
            }
        </script>


    </div>

    <script src="~/Content/wwwroot/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/Content/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/Content/wwwroot/js/site.js" asp-append-version="true"></script>
</body>
</html>



